<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nissan Z Archive — SVG Interactive Prototype</title>

  <style>
    /* Medium-fidelity: black background so white SVG lines show */
    html, body { height: 100%; margin: 0; }
    body { background:#000; font-family: Arial, Helvetica, sans-serif; }

    /* Semantic layout */
    header { padding: 12px 16px; color:#fff; border-bottom:1px solid #333; }
    main { height: calc(100vh - 50px); display: grid; grid-template-columns: 1fr; }
    /* On wider screens, show a side panel */
    @media (min-width: 900px){
      main { grid-template-columns: 1fr 320px; }
    }

    /* SVG stage */
    .stage {
      height: 100%;
      width: 100%;
      border-right: 1px solid #333;
    }
    .stage object {
      width: 100%;
      height: 100%;
      display: block;
      background:#000;
    }

    /* Simple info panel (interaction feedback) */
    aside {
      color:#fff;
      padding: 14px;
      border-left: 1px solid #333;
      background:#070707;
      display:none;
    }
    @media (min-width: 900px){
      aside { display:block; }
    }
    .panel-title { margin:0 0 10px; font-size: 16px; letter-spacing: 0.5px; }
    .panel-box {
      border:1px solid #333;
      border-radius: 12px;
      padding: 12px;
      background:#0b0b0b;
    }
    .panel-muted { color:#bbb; font-size: 13px; line-height: 1.4; margin: 8px 0 0; }
    .chip {
      display:inline-block;
      border:1px solid #333;
      border-radius: 999px;
      padding: 5px 10px;
      font-size: 12px;
      margin: 8px 6px 0 0;
      color:#ddd;
      background:#111;
    }
  </style>
</head>

<body>
  <!-- Semantic Header -->
  <header>
    <strong>Nissan Z Archive — Interactive SVG Prototype</strong>
    <!-- This page demonstrates: design (SVG wireframe) → code interactions (hover/click) -->
  </header>

  <main>
    <!-- SVG Stage -->
    <section class="stage" aria-label="Interactive SVG wireframe">
      <!-- IMPORTANT: same folder as this HTML -->
      <object id="svgObj" data="Untitled-2.svg" type="image/svg+xml">
        Your browser couldn’t load the SVG. Make sure Untitled-2.svg is in the same folder.
      </object>
    </section>

    <!-- Side panel (shows what user clicked) -->
    <aside aria-label="Interaction panel">
      <h2 class="panel-title">Interaction Panel</h2>
      <div class="panel-box">
        <strong id="panelHeading">Click something in the SVG</strong>
        <p id="panelBody" class="panel-muted">
          Try clicking the top nav text (Home / Models / Archive / About) or the car blocks.
        </p>
        <div id="panelTags"></div>
      </div>
    </aside>
  </main>

  <script>
    const obj = document.getElementById("svgObj");

    obj.addEventListener("load", () => {
      const svgDoc = obj.contentDocument;
      if (!svgDoc) return;

      const svg = svgDoc.querySelector("svg");
      if (!svg) return;

      // --- Inject CSS into the SVG so hover/click looks good ---
      const style = svgDoc.createElementNS("http://www.w3.org/2000/svg", "style");
      style.textContent = `
        /* Make interactive things feel clickable */
        .is-clickable { cursor: pointer; }

        /* Hover highlight */
        .is-clickable:hover { opacity: 0.9; }

        /* When selected, add a glow (works well on dark bg) */
        .is-selected {
          filter: drop-shadow(0 0 6px rgba(255,255,255,0.55))
                  drop-shadow(0 0 14px rgba(255,255,255,0.25));
        }

        /* If it's text, brighten it on hover */
        text.is-clickable:hover { fill: #ffffff !important; }
      `;
      svg.querySelector("defs")?.appendChild(style) || svg.insertBefore(style, svg.firstChild);

      // --- Panel helpers (HTML UI feedback) ---
      const panelHeading = document.getElementById("panelHeading");
      const panelBody = document.getElementById("panelBody");
      const panelTags = document.getElementById("panelTags");

      function setPanel(title, body, tags=[]) {
        panelHeading.textContent = title;
        panelBody.textContent = body;
        panelTags.innerHTML = "";
        tags.forEach(t => {
          const span = document.createElement("span");
          span.className = "chip";
          span.textContent = t;
          panelTags.appendChild(span);
        });
      }

      function clearSelected() {
        svgDoc.querySelectorAll(".is-selected").forEach(el => el.classList.remove("is-selected"));
      }

      // --- 1) NAV INTERACTIONS (Home / Models / Archive / About) ---
      // Your SVG contains a <text> that includes these words.
      // We'll find *all* SVG <text> nodes and attach clicks when they contain nav keywords.
      const navKeywords = ["Home", "Models", "Archive", "About"];

      svgDoc.querySelectorAll("text").forEach(t => {
        const content = (t.textContent || "").replace(/\s+/g, " ").trim();
        if (!content) return;

        // If this text line contains the nav words, make it clickable.
        const matchesNav = navKeywords.some(k => content.includes(k));
        if (!matchesNav) return;

        t.classList.add("is-clickable");

        t.addEventListener("click", () => {
          clearSelected();
          t.classList.add("is-selected");

          // Basic behavior: update panel
          setPanel(
            "Navigation clicked",
            "This would navigate in the final site. For now it highlights the SVG nav text and updates this panel.",
            ["SVG Nav", "Prototype Interaction"]
          );
        });
      });

      // --- 2) CAR BLOCK INTERACTIONS ---
      // We don’t have clean IDs in the SVG, so the safest “beginner” approach:
      // Make every <image> in the SVG clickable (these are your car/image blocks).
      const images = svgDoc.querySelectorAll("image");

      images.forEach((img, i) => {
        img.classList.add("is-clickable");

        img.addEventListener("mouseenter", () => {
          // hover glow
          img.classList.add("is-selected");
        });

        img.addEventListener("mouseleave", () => {
          img.classList.remove("is-selected");
        });

        img.addEventListener("click", () => {
          clearSelected();
          img.classList.add("is-selected");

          // Try to find a nearby label (often a <text> appears after an image)
          // This is not perfect, but works well enough for prototype.
          let label = "Car Block";
          const nextText = img.parentNode?.querySelector("text");
          if (nextText && nextText.textContent.trim()) label = nextText.textContent.trim();

          setPanel(
            "Car block clicked",
            `You clicked an image block inside the SVG. In the final site, this would open a Model Detail or Archive Item page.`,
            ["Car Block", `Item #${i+1}`, label.slice(0, 24)]
          );
        });
      });

      // --- 3) OPTIONAL: Make model title texts clickable too ---
      // Example: your SVG contains “Datsun 240Z / Fairlady Z”
      // We'll attach clicks to any text containing "240Z" or "280ZX" as a demo.
      const modelKeywords = ["240Z", "280ZX", "S30", "Z32", "Z33", "Z34"];

      svgDoc.querySelectorAll("text").forEach(t => {
        const content = (t.textContent || "").trim();
        if (!content) return;

        if (!modelKeywords.some(k => content.includes(k))) return;

        t.classList.add("is-clickable");
        t.addEventListener("click", () => {
          clearSelected();
          t.classList.add("is-selected");

          setPanel(
            "Model label clicked",
            `You clicked a model label: "${content}". In the final site, this would jump to that model’s detail page.`,
            ["Model", "Label Interaction"]
          );
        });
      });

      // Initial message
      setPanel(
        "Ready",
        "Click the SVG nav text or any car image blocks to see interactions.",
        ["SVG Wireframe", "HTML + JS"]
      );
    });
  </script>
</body>
</html>